<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ES6笔记 - Mashiro的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Mashiro的博客"><meta name="msapplication-TileImage" content="/img/mashiro1.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Mashiro的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="ES6"><meta property="og:type" content="blog"><meta property="og:title" content="ES6笔记"><meta property="og:url" content="https://sami-zzz.github.io/2022/10/09/ES6%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="Mashiro的博客"><meta property="og:description" content="ES6"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://sami-zzz.github.io/img/og_image.png"><meta property="article:published_time" content="2022-10-09T09:21:31.000Z"><meta property="article:modified_time" content="2022-10-09T09:25:35.065Z"><meta property="article:author" content="Mashiro"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="前端"><meta property="article:tag" content="笔记"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://sami-zzz.github.io/2022/10/09/ES6%E7%AC%94%E8%AE%B0/"},"headline":"ES6笔记","image":["https://sami-zzz.github.io/img/og_image.png"],"datePublished":"2022-10-09T09:21:31.000Z","dateModified":"2022-10-09T09:25:35.065Z","author":{"@type":"Person","name":"Mashiro"},"publisher":{"@type":"Organization","name":"Mashiro的博客","logo":{"@type":"ImageObject","url":"https://sami-zzz.github.io/img/mashiro1.jpg"}},"description":"ES6"}</script><link rel="canonical" href="https://sami-zzz.github.io/2022/10/09/ES6%E7%AC%94%E8%AE%B0/"><link rel="icon" href="/img/mashiro1.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/mashiro1.jpg" alt="Mashiro的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Sami-zzz/Sami-zzz.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-10-09T09:21:31.000Z" title="2022/10/9 17:21:31">2022-10-09</time>发表</span><span class="level-item"><time dateTime="2022-10-09T09:25:35.065Z" title="2022/10/9 17:25:35">2022-10-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span><span class="level-item">41 分钟读完 (大约6200个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">ES6笔记</h1><div class="content"><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><span id="more"></span>

<h2 id="ES6简介"><a href="#ES6简介" class="headerlink" title="ES6简介"></a>ES6简介</h2><ul>
<li><p>ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在 2015 年 6 月正式发布了。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言</p>
</li>
<li><p>90%的浏览器都支持ES6，也可以通过 babel 编译器（一个 js 编译器）将 ES5 代码 转为 ES6 代码</p>
</li>
</ul>
<h2 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h2><ul>
<li>let 声明变量没有变量提升</li>
<li>let 是一个块作用域，<code>let</code>声明的变量只在它所在的代码块有效。在语法上，称为“暂时性死区”（temporal dead zone，简称 TDZ）</li>
<li>let 不可以重复声明 </li>
</ul>
<ul>
<li>const 声明常量，一旦声明就不能被修改，除此之外也有 let 的三个特性。</li>
</ul>
<p>开发中，默认情况下用 const，而只有在你知道变量值需要被修改的情况下使用 let</p>
<h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><ul>
<li>模板字符串：使用 tab 键的反引号 `</li>
<li>插入变量时：使用 ${ 变量名 }</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> oBox = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.box&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> id = <span class="number">1</span>, name = <span class="string">&#x27;牛肉粉&#x27;</span>;</span><br><span class="line"><span class="comment">// ES6 写法</span></span><br><span class="line"><span class="keyword">let</span> htmlStr = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">			        &lt;li&gt;</span></span><br><span class="line"><span class="string">				        &lt;p id = <span class="subst">$&#123;id&#125;</span> &gt; <span class="subst">$&#123;name&#125;</span> &lt;/p&gt;</span></span><br><span class="line"><span class="string">			        &lt;/li&gt;</span></span><br><span class="line"><span class="string">		       &lt;/ul&gt;`</span></span><br><span class="line"></span><br><span class="line">oBox.innerHTML = htmlStr;</span><br></pre></td></tr></table></figure>



<h2 id="函数默认值和剩余参数"><a href="#函数默认值和剩余参数" class="headerlink" title="函数默认值和剩余参数"></a>函数默认值和剩余参数</h2><ul>
<li>函数默认值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a = <span class="number">10</span>, b = <span class="number">20</span></span>)</span>&#123;    <span class="comment">//设置默认值</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add());    <span class="comment">// 30</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b = getVal(<span class="number">5</span>)</span>) </span>&#123; <span class="comment">//默认值可以是函数</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVal</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> val + <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>));   </span><br></pre></td></tr></table></figure>

<ul>
<li>剩余参数 ：由…和一个紧跟着的具名参数组成 : …keys</li>
</ul>
<ul>
<li>…keys 解决了 arguments 的问题 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkArgs</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args);         <span class="comment">// 返回一个真实的实参数组[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);    <span class="comment">// 返回一个实参伪数组</span></span><br><span class="line">&#125;</span><br><span class="line">checkArgs(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>剩余参数与扩展运算符的区别：</p>
<ul>
<li>剩余参数：把多个独立的合并到一个数组中</li>
<li>扩展运算符：将一个数组分割，并将各个项作为分离的参数传给函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Math.max 获取最大值 </span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">90</span>, <span class="number">100</span>, <span class="number">40</span>];</span><br><span class="line"><span class="comment">// 扩展运算符更方便</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...arr))               <span class="comment">//  100</span></span><br></pre></td></tr></table></figure>



<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><ul>
<li>使用 =&gt; 来定义 , function(){} 等价于 () =&gt; {}  ，代码变得更加简洁</li>
<li>箭头函数内部没有 arguments</li>
<li>箭头函数不能使用 new 关键字来实例化对象，function 函数也是一个对象，但是箭头函数不是</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 上下两者写法等价</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h3><ul>
<li>箭头函数没有this的指向，箭头函数内部的this值只能通过查找作用域链来确定</li>
</ul>
<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><ul>
<li>解构赋值是对赋值运算符的一种扩展。它通常针对数组和对象进行操作。</li>
<li>优点：代码书写简洁且易读性高</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;iden&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> &#123;type,name&#125; = node;</span><br><span class="line"><span class="built_in">console</span>.log(type,name) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//剩余运算符 使用此法将其它属性展开到一个对象中存储</span></span><br><span class="line"><span class="keyword">let</span> &#123;a,...res&#125; = obj;</span><br><span class="line"><span class="built_in">console</span>.log(a,res);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值 a 的值 20 ，b 的值 30</span></span><br><span class="line"><span class="keyword">let</span> &#123;a,b = <span class="number">30</span>&#125; = &#123;<span class="attr">a</span>:<span class="number">20</span>&#125;; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对数组的解构</span></span><br><span class="line"><span class="keyword">let</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a,b) </span><br><span class="line"><span class="comment">//可嵌套</span></span><br><span class="line"><span class="keyword">let</span> [a, [b], c] = [<span class="number">1</span>, [<span class="number">2</span>], <span class="number">3</span>]</span><br></pre></td></tr></table></figure>



<h2 id="对象扩展"><a href="#对象扩展" class="headerlink" title="对象扩展"></a>对象扩展</h2><ul>
<li> **Object.is()**： 比较两个值是否严格相等 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>)</span><br><span class="line"><span class="built_in">console</span>.log(+<span class="number">0</span> === -<span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Object.assign()</strong></p>
<p><code>Object.assign(target, obj1, obj2...)</code>方法用于对象的合并，将原对象（obj）的所有属性，复制到目标对象（target）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">b</span>:<span class="number">2</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br></pre></td></tr></table></figure>



<h2 id="Symbol类型"><a href="#Symbol类型" class="headerlink" title="Symbol类型"></a>Symbol类型</h2><ul>
<li>它表示的是独一无二的值</li>
<li>最大的用途：用来定义对象的私有变量</li>
<li>如果用 Symbol 定义的是对象中的变量，取值时一定要用 [变量名] </li>
<li>如果用 Symbol 定义的是对象中的变量，该变量不能作为key，无法用 for 循环遍历</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name1 = <span class="built_in">Symbol</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> name2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name1 === name2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>(<span class="string">&#x27;s1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    [s1]: <span class="string">&#x27;qwe&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(person[s1])</span><br></pre></td></tr></table></figure>



<h2 id="Set和Map"><a href="#Set和Map" class="headerlink" title="Set和Map"></a>Set和Map</h2><p>Set 集合：表示无重回复值的有序列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//new</span></span><br><span class="line"><span class="keyword">let</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"></span><br><span class="line">set1.add(<span class="number">1</span>)</span><br><span class="line">set1.add(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(set1)</span><br><span class="line"><span class="built_in">console</span>.log(set1.size)</span><br><span class="line">set1.delete(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(set1.has(<span class="string">&#x27;1&#x27;</span>))</span><br><span class="line">set1.add(<span class="number">2</span>)</span><br><span class="line">set1.add(<span class="number">3</span>)</span><br><span class="line">set1.add(<span class="number">4</span>)</span><br><span class="line"><span class="comment">//遍历</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">of</span> set1)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//set去重</span></span><br><span class="line"><span class="keyword">let</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">console</span>.log(set2)</span><br><span class="line"><span class="keyword">let</span> arr = [...set2]</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure>

<p>Map：键值对的有序列表，键和值是任意类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map1.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map1)</span><br><span class="line"><span class="built_in">console</span>.log(map1.get(<span class="string">&#x27;name&#x27;</span>))</span><br><span class="line">map1.delete(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map1.has(<span class="string">&#x27;name&#x27;</span>))</span><br><span class="line"></span><br><span class="line">map1.set([<span class="string">&#x27;a&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]], <span class="string">&#x27;asd&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="keyword">let</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>], [<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="built_in">console</span>.log(map2)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>



<h2 id="数组的扩展方法"><a href="#数组的扩展方法" class="headerlink" title="数组的扩展方法"></a>数组的扩展方法</h2><ul>
<li><code>Array.from()</code>方法用于将伪数组转为真正的数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr1 = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(arr1)</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lis = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(lis)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(lis, <span class="function"><span class="params">ele</span> =&gt;</span> ele.textContent)</span><br><span class="line"><span class="built_in">console</span>.log(arr2)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Array.of()</code>方法用于将一组值，转换为数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr3 = <span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;3&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>], &#123;<span class="attr">id</span>:<span class="number">1</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr3)</span><br></pre></td></tr></table></figure>



<ul>
<li><p>copyWithin(target, start = 0, end = this.length);  在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组</p>
<p>target（必需）：从该位置开始替换数据。如果为负值，表示倒数。</p>
</li>
</ul>
<p>​       start（可选）：从该位置开始读取数据，默认为 0。如果为负值，表示从末尾开始计算。</p>
<p>​        end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示从末尾开始计算。</p>
<p>​        这三个参数都应该是数值，如果不是，会自动转为数值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr4 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr4)   <span class="comment">// [8, 9, 10, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>find() 方法：找出第一个符合条件的数组成员，它的参数是一个回调函数。</p>
</li>
<li><p>findIndex() 方法：找出第一个符合条件的数组成员的索引</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = [<span class="number">1</span>,<span class="number">2</span>,-<span class="number">10</span>, <span class="number">8</span>, -<span class="number">1</span>].find( <span class="function"><span class="params">n</span> =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numIndex = [<span class="number">1</span>,<span class="number">2</span>,-<span class="number">10</span>, <span class="number">8</span>, -<span class="number">1</span>].findIndex( <span class="function"><span class="params">n</span> =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(numIndex)</span><br></pre></td></tr></table></figure>



<ul>
<li>ES6 提供三个新的方法——<code>entries()</code>，<code>keys()</code>和<code>values()</code>——用于遍历数组。它们都返回一个遍历器对象，可以用<code>for...of</code>循环进行遍历，唯一的区别是：</li>
</ul>
<p><code>keys()</code>是对键名的遍历、<code>values()</code>是对键值的遍历，<code>entries()</code>是对键值对的遍历</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr5 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr5.keys())</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">of</span> arr5.keys())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arr5.values())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [k, v] <span class="keyword">of</span> arr5.entries())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>includes() 返回一个布尔值，表示某个数组是否包含给定的值</p>
<p>注意：以前的 <code>indexOf</code>方法有两个缺点，一是不够语义化，它的含义是找到参数值的第一个出现位置，返回值是1或-1，所以要去比较是否不等于<code>-1</code>，表达起来不够直观</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(arr5.includes(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>



<h2 id="Iterator遍历器"><a href="#Iterator遍历器" class="headerlink" title="Iterator遍历器"></a>Iterator遍历器</h2><ul>
<li>遍历器（Iterator）它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 Iterator 接口，就可以完成遍历操作（即依次处理该数据结构的所有成员），快捷的访问数据。</li>
</ul>
<ul>
<li>Iterator 的作用有三个：一是为各种数据结构，提供一个统一的、简便的访问接口；二是使得数据结构的成员能够按某种次序排列；三是 ES6 创造了一种新的遍历命令<strong>for…of</strong>循环，Iterator 接口主要供for…of消费。</li>
</ul>
<ul>
<li>Iterator 的遍历过程是这样的。</li>
</ul>
<ol>
<li>创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</li>
<li>第一次调用指针对象的<code>next</code>方法，可以将指针指向数据结构的第一个成员。</li>
<li>第二次调用指针对象的<code>next</code>方法，指针就指向数据结构的第二个成员。</li>
<li>不断调用指针对象的<code>next</code>方法，直到它指向数据结构的结束位置。</li>
<li>每一次调用<code>next</code>方法，都会返回数据结构的当前成员的信息。具体来说，就是返回一个包含<code>value</code>和<code>done</code>两个属性的对象。其中，<code>value</code>属性是当前成员的值，<code>done</code>属性是一个布尔值，表示遍历是否结束</li>
</ol>
<ul>
<li>原生具备 Iterator 接口的数据结构如下。</li>
</ul>
<ol>
<li> Array</li>
<li> Map</li>
<li> Set</li>
<li> String</li>
<li> TypedArray</li>
<li> 函数的 arguments 对象</li>
<li> NodeList 对象 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> items = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>];</span><br><span class="line"><span class="comment">//创建一个遍历器</span></span><br><span class="line"><span class="keyword">let</span> ite = items[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"><span class="built_in">console</span>.log(ite.next()) <span class="comment">// &#123; value: &#x27;one&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()) <span class="comment">// &#123; value: &#x27;two&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()) <span class="comment">// &#123; value: &#x27;three&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()) <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="Generator函数（生成器）"><a href="#Generator函数（生成器）" class="headerlink" title="Generator函数（生成器）"></a>Generator函数（生成器）</h2><ul>
<li><code>Symbol.iterator</code>方法，等于该对象的遍历器生成函数，调用该函数会返回一个遍历器对象。而 Generator 函数也是遍历器生成函数，可以把 Generator 函数赋值给对象的<code>Symbol.iterator</code>属性，从而使得该对象具有 Iterator 接口，给不具备 Iterator 接口的数据结构（不自带<code>Symbol.iterator</code>方法）提供遍历操作。</li>
</ul>
<ul>
<li><p>形式上，Generator 函数是一个普通函数，但是有两个特征（区别）。一是，<code>function</code>关键字与函数名之间有一个星号 * ；二是，函数体内部使用<code>yield</code>表达式</p>
</li>
<li><p>Generator 函数是分段执行的，只有调用<code>next</code>方法才会遍历下一个内部状态。<code>yield</code>是暂停执行标志，next()是恢复执行。当 next() 传入参数时，该参数就会被当作上一个 yield 表达式的返回值</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;one&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;two&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn = fun()</span><br><span class="line"><span class="built_in">console</span>.log(fn)</span><br><span class="line"><span class="built_in">console</span>.log(fn.next())</span><br><span class="line"><span class="built_in">console</span>.log(fn.next())</span><br><span class="line"><span class="built_in">console</span>.log(fn.next())</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;****************&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;one &#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> x = <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;two &#x27;</span> + <span class="string">&#x27;x:&#x27;</span> + x)</span><br><span class="line">    <span class="keyword">let</span> y = <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;add &#x27;</span> + <span class="string">&#x27;y:&#x27;</span> + y)</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn2 = add()</span><br><span class="line"><span class="built_in">console</span>.log(fn2.next())</span><br><span class="line"><span class="built_in">console</span>.log(fn2.next(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">console</span>.log(fn2.next(<span class="number">30</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li>使用场景：为不具备 Iterator 接口的对象提供了遍历操作</li>
<li>利用<code>for...of</code>循环，可以写出遍历任意对象（object）的方法。原生的 JavaScript 对象没有遍历接口（不具备 <code>Symbol.iterator</code>方法），无法使用<code>for...of</code>循环，通过 Generator 函数为它加上这个接口，即将 Generator 函数加到对象的<code>Symbol.iterator</code>属性上面，就可以用了。</li>
<li>除了<code>for...of</code>循环以外，扩展运算符（<code>...</code>）、解构赋值和<code>Array.from</code>方法内部调用的，都是遍历器接口。这意味着，它们都可以将 Generator 函数返回的 Iterator 对象，作为参数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">12</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;China&#x27;</span> </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span>* <span class="title">ObjectEntries</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> propKeys = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">const</span> propKey <span class="keyword">of</span> propKeys)&#123;</span><br><span class="line">                <span class="keyword">yield</span> [propKey, obj[propKey]]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> [k, v] <span class="keyword">of</span> ObjectEntries(person))&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(k, v)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(...ObjectEntries(person))</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;************&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span>* <span class="title">ObjectEntries2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> propKeys = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">const</span> propKey <span class="keyword">of</span> propKeys)&#123;</span><br><span class="line">                <span class="keyword">yield</span> [propKey, <span class="built_in">this</span>[propKey]]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        person[<span class="built_in">Symbol</span>.iterator] = ObjectEntries2</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> [k, v] <span class="keyword">of</span> person)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;k&#125;</span> <span class="subst">$&#123;v&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(...person)</span><br><span class="line">        <span class="built_in">console</span>.log(&#123;name, age, address&#125; = person)</span><br></pre></td></tr></table></figure>

<ul>
<li>Generator 函数在加载页面的异步应用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">load</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    loadUI()</span><br><span class="line">    <span class="keyword">yield</span> showData()</span><br><span class="line">    hideUI()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iteload = load()</span><br><span class="line">iteload.next()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadUI</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;加载loading...页面&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showData</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;数据加载完成&#x27;</span>)</span><br><span class="line">        iteload.next()</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideUI</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;隐藏loading...页面&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Promise对象"><a href="#Promise对象" class="headerlink" title="Promise对象"></a>Promise对象</h2><ul>
<li><p>简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果</p>
</li>
<li><p>Promise 是一个对象，Promise 提供统一的 API，各种异步操作都可以用同样的方法进行处理。axios 的内部实现原理就是通过 Promise 实现的</p>
</li>
<li><p><code>Promise</code>对象有以下两个特点：</p>
</li>
</ul>
<ol>
<li>对象的状态不受外界影响。有三种状态：<code>pending</code>（进行中）、<code>fulfilled</code>（成功）和<code>rejected</code>（失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态</li>
<li>一旦状态改变，就不会再变，任何时候都可以得到这个结果。<code>Promise</code>对象的状态改变，只有两种可能：从<code>pending</code>变为resolved和从<code>pending</code>变为<code>rejected</code>。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果</li>
</ol>
<ul>
<li>Promise对象是一个构造函数，用来生成Promise实例，带有一个回调函数，回调函数的两个参数是 resolve（成功） 和 <code>reject（失败）,</code>这两个参数他们也是函数。</li>
<li><code>then</code>方法的第一个参数是<code>resolved</code>状态的回调函数，第二个参数是<code>rejected</code>状态的回调函数，它们都是可选的。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本使用        </span></span><br><span class="line"><span class="keyword">let</span> pro = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>)</span>&#123;</span><br><span class="line">            <span class="comment">//执行异步操作</span></span><br><span class="line">            <span class="keyword">let</span> res = &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">201</span>,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;asd&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">error</span>: <span class="string">&#x27;失败了&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(res.code === <span class="number">200</span>)&#123;</span><br><span class="line">                    resolved(res.data)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    rejected(res.error)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(pro)</span><br><span class="line">        pro.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123; </span><br><span class="line">            <span class="built_in">console</span>.log(val)</span><br><span class="line">        &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//封装的Promise</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">timeOut</span>(<span class="params">ms</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>)</span>&#123;</span><br><span class="line">                <span class="comment">//执行异步操作</span></span><br><span class="line">                <span class="keyword">let</span> res = &#123;</span><br><span class="line">                    <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;asd&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">error</span>: <span class="string">&#x27;失败了&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(res.code === <span class="number">200</span>)&#123;</span><br><span class="line">                        resolved(res.data)</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        rejected(res.error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, ms)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        timeOut(<span class="number">2000</span>).then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(val)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用Promise封装Ajax</span></span><br><span class="line">	<span class="keyword">const</span> getJSON = <span class="function"><span class="keyword">function</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">                xhr.open(<span class="string">&#x27;GET&#x27;</span>, url)</span><br><span class="line">                xhr.responseType = <span class="string">&#x27;json&#x27;</span></span><br><span class="line">                xhr.setRequestHeader(<span class="string">&#x27;Accept&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line">                xhr.send()</span><br><span class="line">                xhr.onreadystatechange = handler</span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="built_in">this</span>.readyState === <span class="number">4</span>)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">this</span>.status === <span class="number">200</span>)&#123;</span><br><span class="line">                            resolve(<span class="built_in">this</span>.response.HeWeather6)</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="built_in">this</span>.statusText))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> a = getJSON(<span class="string">&#x27;https://free-api.heweather.net/s6/weather/now?location=beijing&amp;key=4693ff5ea653469f8bb0c29638035976&#x27;</span>)</span><br><span class="line">        .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data[<span class="number">0</span>])</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果一个promise执行完后 返回的还是一个promise 实例（注意，不是原来那个<code>Promise</code>实例），会把这个promise 的执行结果，传递给下一次<code>then</code>中。因此可以采用链式写法，即<code>then</code>方法后面再调用另一个<code>then</code>方法。</li>
</ul>
<ul>
<li><p><code>catch(err=&gt;&#123;&#125;)</code>方法等价于<code>then(null,err=&gt;&#123;&#125;)，</code>用于指定发生错误时的回调函数</p>
</li>
<li><p><code>resolve()</code>方法将现有对象转换成Promise对象，该实例的状态为 fulfilled 成功</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resolve()  reject()</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br><span class="line">p.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>reject()</code>方法和<code>resolve()</code>方法一样返回一个新的Promise实例,该实例的状态为 rejected（失败）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;出错了&#x27;</span>));</span><br><span class="line"><span class="comment">//等价于 let p2 = new Promise((resolve,reject)=&gt;reject(new Error(&#x27;出错了)));</span></span><br><span class="line">p2.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>all(): <code>all()</code>方法提供了并行执行异步操作的能力，并且再所有异步操作执行完后才执行回调</p>
<p>应用：一些游戏类的素材比较多，等待所有图片，静态资源都加载完成，才进行页面的初始化</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//all()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve())</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve())</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve())</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = <span class="built_in">Promise</span>.all([p1, p2, p3])</span><br><span class="line">p4.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Promise.all()接受一个promise对象的数组，待全部完成之后，统一执行success</strong>;</p>
</li>
<li><p>race(): <strong>接受一个包含多个promise对象的数组，只要有一个完成，就执行success</strong></p>
<p>应用：当我们请求某个图片资源，会导致时间过长，给用户反馈</p>
<p>用race给某个异步请求设置超时时间，并且在超时后执行相应的操作</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//race()</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">requestImg</span>(<span class="params">ImgSrc</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> img = <span class="keyword">new</span> Image()</span><br><span class="line">                img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                    resolve(img)</span><br><span class="line">                &#125;</span><br><span class="line">                img.src = ImgSrc</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolev, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                   reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请求图片失败&#x27;</span>)) </span><br><span class="line">                &#125;, <span class="number">3000</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Promise</span>.race([requestImg(<span class="string">&#x27;&#x27;</span>), timeout()]).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data)</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;).done(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>done()</code>和<code>finally()</code></li>
</ul>
<h2 id="async异步操作"><a href="#async异步操作" class="headerlink" title="async异步操作"></a>async异步操作</h2><p>async 函数，它就是 Generator 函数的语法糖</p>
<p>作用：使得异步操作更加方便</p>
<ul>
<li><strong>凡是在前面添加了async的函数在执行后都会自动返回一个Promise对象</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> result = test()</span><br><span class="line"><span class="built_in">console</span>.log(result)  <span class="comment">//即便代码里test函数什么都没返回，我们依然打出了Promise对象</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>await必须在async函数里使用，不能单独使用</strong></li>
<li><strong>await的作用之一就是获取后面Promise对象成功状态传递出来的参数传给 then 函数。</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ** 如果 await 命令后面的不是一个Promise实例对象，</span></span><br><span class="line"><span class="comment">    ** await 命令会自动把await后面转为一个Promise实例对象</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="string">&#x27;hello async&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 因为返回的是一个Promise实例对象，所以可以用链式编程 </span></span><br><span class="line">f().then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(v)&#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(e)&#125;); </span><br></pre></td></tr></table></figure>

<ul>
<li>如果 async 函数中有多个 await , 那么 then 函数 会等待所有的 await 指令运行完才去执行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="keyword">await</span> <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> s.split(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line">f().then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(v)&#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(e)&#125;);   </span><br></pre></td></tr></table></figure>

<ul>
<li>任何一个<code>await</code>语句后面的 Promise 对象变为<code>reject</code>状态，那么整个<code>async</code>函数都会中断执行。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;出错了&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">f().then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(v)&#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(e)&#125;);      <span class="comment">//输出 出错了</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">** async函数f执行后，await后面的 Promise 对象会抛出一个错误对象，</span></span><br><span class="line"><span class="comment">** 变成了 reject 状态，catch方法的回调函数被调用</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 抛出一个错误对象</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;出错了&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">f2().then(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">console</span>.log(v)).catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e))</span><br><span class="line"><span class="comment">// Error：出错了</span></span><br></pre></td></tr></table></figure>

<p>针对上诉遇到 <code>reject</code>状态，就中断执行的问题，可以通过 try…catch 代码块解决</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;出错了&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error)&#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">f2().then(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">console</span>.log(v)).catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e))     <span class="comment">// 输出 hello</span></span><br></pre></td></tr></table></figure>



<h2 id="class的用法"><a href="#class的用法" class="headerlink" title="class的用法"></a>class的用法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5 </span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">function Person(name, age) &#123;</span></span><br><span class="line"><span class="comment">    this.name = name;</span></span><br><span class="line"><span class="comment">    this.age = age;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">Person.prototype.sayName  = function() &#123;</span></span><br><span class="line"><span class="comment">    return this.sayName;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">let p = new Person(&#x27;牛肉粉&#x27;,18);</span></span><br><span class="line"><span class="comment">console.log(p);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例化的时候会立即被调用</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//等同于Person.prototype = function sayName()&#123;&#125;</span></span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 小技巧：通过 Objec.assign() 方法(详见对象的扩展功能)一次性向类中添加多个方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Object.assign(Person.prototype, &#123;</span></span><br><span class="line"><span class="comment">    sayName()&#123;</span></span><br><span class="line"><span class="comment">        return this.name;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    sayAge()&#123;</span></span><br><span class="line"><span class="comment">        return this.age;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;牛肉粉&#x27;</span>,<span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br><span class="line">p.sayName();</span><br><span class="line">p.sayAge();</span><br></pre></td></tr></table></figure>

<ul>
<li>类的继承</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例化的时候会立即被调用</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name, age, color</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// 如果 子类 继承了 父类，且 子类 中写了构造器，则 子类 构造器的 super 必须要调用</span></span><br><span class="line">        <span class="built_in">super</span>(name, age);  <span class="comment">// 等同于 Animal.call(this,name,age); 继承父类的属性</span></span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 子类自己的方法</span></span><br><span class="line">    <span class="function"><span class="title">sayColor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>是<span class="subst">$&#123;<span class="built_in">this</span>.age&#125;</span>岁了，它的颜色是<span class="subst">$&#123;<span class="built_in">this</span>.color&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重写父类的方法</span></span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// super 相同于 Animal</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name + <span class="built_in">super</span>.sayAge + <span class="built_in">this</span>.color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> d1 = <span class="keyword">new</span> Dog(<span class="string">&#x27;小黄&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d1.sayAge());     <span class="comment">// 调用继承父类的方法</span></span><br><span class="line"><span class="built_in">console</span>.log(d1.sayColor());   <span class="comment">// 调用子类自己的方法</span></span><br><span class="line"><span class="built_in">console</span>.log(d1.sayName());    <span class="comment">// 调用重写父类的方法</span></span><br></pre></td></tr></table></figure>



<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><ul>
<li>ES6 模块功能主要有两个命令构成：export 和 import</li>
<li><code>export</code>命令用于规定模块的对外接口，<code>import</code>命令用于输入其他模块提供的功能。</li>
<li>一个模块就是一个独立的文件。该文件内部的所有变量，外部无法获取。如果你希望外部能够读取模块内部的某个变量，就必须使用<code>export</code>关键字输出该变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//module/index.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fristName);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//也可以这样</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">const</span> sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fristName);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;name, age, sayName&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;name, age, sayName&#125; <span class="keyword">from</span> <span class="string">&#x27;./modules/index.js&#x27;</span>;<span class="comment">//解构赋值 &#123;name, age, sayName&#125;</span></span><br></pre></td></tr></table></figure>

<p>使用<code>export default</code>命令为模块指定默认输出，在其它模块加载该模块时，<code>import</code>命令可以为该匿名函数指定任意名字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//或者写成</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> foo;</span><br></pre></td></tr></table></figure>

<p>如果想在一条import语句中，同时输入默认方法（default）和其他接口（非default），可以写成下面这样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;add&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> customName,&#123;add&#125; <span class="keyword">from</span> <span class="string">&#x27;export-default.js&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 方式二 * 代表所有属性和方法 as 代表重命名</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> f <span class="keyword">from</span> <span class="string">&#x27;export-default.js&#x27;</span>   </span><br><span class="line"><span class="built_in">console</span>.log(f);   <span class="comment">// 输出一个 模块, 里面保存了 export 传过来的所有属性和方法</span></span><br><span class="line"><span class="built_in">console</span>.log(f.default);  </span><br></pre></td></tr></table></figure>

<p><code>export default</code>也可以用来输出类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123; ... &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Person <span class="keyword">from</span> <span class="string">&#x27;MyClass&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure>



<h2 id="数组方法"><a href="#数组方法" class="headerlink" title="数组方法"></a>数组方法</h2><h3 id="ES5"><a href="#ES5" class="headerlink" title="ES5"></a>ES5</h3><ul>
<li>indexof(): 用于查找数组中是否存在某个值，如果存在则返回某个值的下标，否则返回<code>-1</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(list.indexOf(<span class="number">2</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(list.indexOf(<span class="string">&quot;蛙人&quot;</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>map():<code>map</code>是一个数组函数方法，接收三个参数，<code>value</code>，<code>index</code>，<code>self</code>，返回值是处理完的结果，返回新数组。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = list.map(<span class="function">(<span class="params">value, key, self</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(value) <span class="comment">// 1 2 3</span></span><br><span class="line">   <span class="built_in">console</span>.log(key) <span class="comment">// 0 1 2</span></span><br><span class="line">   <span class="built_in">console</span>.log(self) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">   <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br></pre></td></tr></table></figure>

<ul>
<li>foreach():用于遍历一个数组，接收三个参数，<code>value</code>，<code>index</code>，<code>self</code>，返回值为<code>undefined</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = list.forEach(<span class="function">(<span class="params">value, key, self</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value) <span class="comment">// 1 2 3</span></span><br><span class="line">    <span class="built_in">console</span>.log(key) <span class="comment">// 0 1 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(self) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>splice(): 用于数组删除或替换内容，接收三个参数：<ul>
<li>第一个参数是，删除或添加的位置</li>
<li>第二个参数是，要删除的几位，如果为0则不删除</li>
<li>第三个参数是，向数组添加内容</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">list.splice(<span class="number">0</span>, <span class="number">1</span>) <span class="comment">// 把第0个位置，给删除一位</span></span><br><span class="line"><span class="built_in">console</span>.log(list) <span class="comment">// [2, 3]</span></span><br><span class="line"></span><br><span class="line">list.splice(<span class="number">0</span>, <span class="number">1</span>, <span class="string">&quot;蛙人&quot;</span>) <span class="comment">// 把第0个位置，给删除一位，添加上一个字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(list) <span class="comment">// [&quot;蛙人&quot;, 2, 3]</span></span><br><span class="line"></span><br><span class="line">list.splice(<span class="number">0</span>, <span class="number">2</span>, <span class="string">&quot;蛙人&quot;</span>) <span class="comment">// 把第0个位置，给删除2位，添加上一个字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(list) <span class="comment">// [&quot;蛙人&quot;, 3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>slice():用于截取数组值，接收两个参数，第一个参数是要获取哪个值的下标，第二个参数是截取到哪个下标的前一位。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.slice(<span class="number">1</span>, <span class="number">3</span>) <span class="comment">// 从第一位下标开始截取，到第三位下标的前一位，所以截取出来就是 [2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>filter():用于过滤数组内的符合条件的值，返回值为满足条件的数组对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>every():用于检测数组所有元素是否都符合指定条件，返回值为<code>Boolean</code> , 该方法是数组中必须全部值元素满足条件返回<code>true</code>，否则<code>false</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.every(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res1 = list.every(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>some():用于检测数组中的元素是否满足指定条件，返回值为<code>Boolean</code> , 该方法是只要数组中有一项满足条件就返回<code>true</code>，否则<code>false</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.some(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>reduce(): 该方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。该方法回调函数接收四个参数</p>
<ul>
<li>第一个参数：<em>初始值</em>, 或者计算结束后的返回值</li>
<li>第二个参数：当前元素</li>
<li>第二个参数：当前元素的索引</li>
<li>第四个参数：当前元素所属的数组对象，本身</li>
</ul>
<p>我们一般只用前两个就行，<code>reduce</code>第一个参数回调函数，第二个参数是初始值</p>
</li>
</ul>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;reduce(<span class="function"><span class="keyword">function</span>(<span class="params">previousValue, currentValue, currentIndex, array</span>) </span>&#123; <span class="comment">/* … */</span> &#125;, initialValue)</span><br></pre></td></tr></table></figure>

<p><code>callbackFn</code></p>
<p>一个“reducer”函数，包含四个参数：</p>
<ul>
<li><code>previousValue</code>：上一次调用 <code>callbackFn</code> 时的返回值。在第一次调用时，若指定了初始值 <code>initialValue</code>，其值则为 <code>initialValue</code>，否则为数组索引为 0 的元素 <code>array[0]</code>。</li>
<li><code>currentValue</code>：数组中正在处理的元素。在第一次调用时，若指定了初始值 <code>initialValue</code>，其值则为数组索引为 0 的元素 <code>array[0]</code>，否则为 <code>array[1]</code>。</li>
<li><code>currentIndex</code>：数组中正在处理的元素的索引。若指定了初始值 <code>initialValue</code>，则起始索引号为 0，否则从索引 1 起始。</li>
<li><code>array</code>：用于遍历的数组。</li>
</ul>
<p><code>initialValue</code> 可选</p>
<p>作为第一次调用 <code>callback</code> 函数时参数 <em>previousValue</em> 的值。若指定了初始值 <code>initialValue</code>，则 <code>currentValue</code> 则将使用数组第一个元素；否则 <code>previousValue</code> 将使用数组第一个元素，而 <code>currentValue</code> 将使用数组第二个元素。</p>
</blockquote>
<ul>
<li>push() 向数组的末尾添加一个或更多元素，并返回新的长度。</li>
<li>unshift() 向数组的开头添加一个或更多元素，并返回新的长度。</li>
<li>pop() 删除并返回数组的最后一个元素</li>
<li>shift() 删除并返回数组的第一个元素</li>
<li>reverse() 颠倒数组中元素的顺序。</li>
</ul>
<ul>
<li>join():用于数据以什么形式拼接</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.join(<span class="string">&quot;-&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 1-2-3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum = <span class="built_in">eval</span>(list.join(<span class="string">&quot;+&quot;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<ul>
<li>sort():可之间排序，或使用回调函数，用于将数组排序，排序规则看返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sort = list.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a)</span><br><span class="line"><span class="built_in">console</span>.log(sort) <span class="comment">// [3, 2, 1]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>concat(): 用于合并数组原始</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = list.concat([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [1, 2, 3, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Array.isArray():检测对象是不是一个数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res =  <span class="built_in">Array</span>.isArray(list)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JavaScript/">JavaScript</a><a class="link-muted mr-2" rel="tag" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/05/18/element-plus%E5%BC%95%E5%85%A5%E5%9C%A8TypeScript5-0%E4%B8%8B%E7%9A%84%E6%8A%A5%E9%94%99/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">element-plus引入在TypeScript5.0下的报错</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/06/25/JS-%E9%AB%98%E7%BA%A7/"><span class="level-item">JS 高级</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/mashiro.jpg" alt="Mashiro"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Mashiro</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>四川  成都</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/sami-zzz" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-18T05:49:11.000Z">2023-05-18</time></p><p class="title"><a href="/2023/05/18/element-plus%E5%BC%95%E5%85%A5%E5%9C%A8TypeScript5-0%E4%B8%8B%E7%9A%84%E6%8A%A5%E9%94%99/">element-plus引入在TypeScript5.0下的报错</a></p><p class="categories"><a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/">项目实践</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-09T09:21:31.000Z">2022-10-09</time></p><p class="title"><a href="/2022/10/09/ES6%E7%AC%94%E8%AE%B0/">ES6笔记</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-25T08:39:15.000Z">2022-06-25</time></p><p class="title"><a href="/2022/06/25/JS-%E9%AB%98%E7%BA%A7/">JS 高级</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-05-19T12:42:44.000Z">2022-05-19</time></p><p class="title"><a href="/2022/05/19/JS-BOM%E6%8A%80%E6%9C%AF/">JS BOM技术</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-30T09:04:02.000Z">2022-04-30</time></p><p class="title"><a href="/2022/04/30/JS-DOM%E6%8A%80%E6%9C%AF/">JS DOM技术</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></p></div></article></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#ES6"><span class="level-left"><span class="level-item">1</span><span class="level-item">ES6</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ES6简介"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">ES6简介</span></span></a></li><li><a class="level is-mobile" href="#let和const"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">let和const</span></span></a></li><li><a class="level is-mobile" href="#模板字符串"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">模板字符串</span></span></a></li><li><a class="level is-mobile" href="#函数默认值和剩余参数"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">函数默认值和剩余参数</span></span></a></li><li><a class="level is-mobile" href="#扩展运算符"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">扩展运算符</span></span></a></li><li><a class="level is-mobile" href="#箭头函数"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">箭头函数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#this指向"><span class="level-left"><span class="level-item">1.6.1</span><span class="level-item">this指向</span></span></a></li></ul></li><li><a class="level is-mobile" href="#解构赋值"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">解构赋值</span></span></a></li><li><a class="level is-mobile" href="#对象扩展"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">对象扩展</span></span></a></li><li><a class="level is-mobile" href="#Symbol类型"><span class="level-left"><span class="level-item">1.9</span><span class="level-item">Symbol类型</span></span></a></li><li><a class="level is-mobile" href="#Set和Map"><span class="level-left"><span class="level-item">1.10</span><span class="level-item">Set和Map</span></span></a></li><li><a class="level is-mobile" href="#数组的扩展方法"><span class="level-left"><span class="level-item">1.11</span><span class="level-item">数组的扩展方法</span></span></a></li><li><a class="level is-mobile" href="#Iterator遍历器"><span class="level-left"><span class="level-item">1.12</span><span class="level-item">Iterator遍历器</span></span></a></li><li><a class="level is-mobile" href="#Generator函数（生成器）"><span class="level-left"><span class="level-item">1.13</span><span class="level-item">Generator函数（生成器）</span></span></a></li><li><a class="level is-mobile" href="#Promise对象"><span class="level-left"><span class="level-item">1.14</span><span class="level-item">Promise对象</span></span></a></li><li><a class="level is-mobile" href="#async异步操作"><span class="level-left"><span class="level-item">1.15</span><span class="level-item">async异步操作</span></span></a></li><li><a class="level is-mobile" href="#class的用法"><span class="level-left"><span class="level-item">1.16</span><span class="level-item">class的用法</span></span></a></li><li><a class="level is-mobile" href="#模块化"><span class="level-left"><span class="level-item">1.17</span><span class="level-item">模块化</span></span></a></li><li><a class="level is-mobile" href="#数组方法"><span class="level-left"><span class="level-item">1.18</span><span class="level-item">数组方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ES5"><span class="level-left"><span class="level-item">1.18.1</span><span class="level-item">ES5</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/LeetCode/"><span class="level-start"><span class="level-item">LeetCode</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">学习笔记</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">数据结构与算法</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/"><span class="level-start"><span class="level-item">项目实践</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/AI%E7%AE%97%E6%B3%95/"><span class="tag">AI算法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C%E8%AF%AD%E8%A8%80/"><span class="tag">C语言</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Typescript/"><span class="tag">Typescript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vue3/"><span class="tag">vue3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%88%86/"><span class="tag">二分</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%B7%E9%A2%98/"><span class="tag">刷题</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"><span class="tag">双指针</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E7%BB%84/"><span class="tag">数组</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tag">笔记</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE/"><span class="tag">项目</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">GitHub</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://zhihu.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">知乎</span></span><span class="level-right"><span class="level-item tag">zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">掘金</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/mashiro1.jpg" alt="Mashiro的博客" height="28"></a><p class="is-size-7"><span>&copy; 2023 Mashiro</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>